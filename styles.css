/* =========================
   KPI Board — Pleasant Light / Dark Themes
   - Light = default, Dark = toggle
   - Цвета через CSS-переменные
   - Ничего не ломает в твоей верстке: базовые селекторы + utility-классы
   ========================= */

/* ---------- Цветовые переменные ---------- */
:root{
  /* Светлая тема — по умолчанию */
  --bg:            #f6f7fb;
  --bg-weak:       #eef1f7;
  --surface:       #ffffff;
  --surface-2:     #fafbfe;
  --text:          #14171f;
  --text-weak:     #59627a;
  --text-mute:     #8a93a7;
  --border:        #e4e8f0;
  --shadow:        0 6px 22px rgba(15, 25, 35, 0.06);

  --primary:       #1f6fff;   /* акцент — чипы/кнопки/ховер */
  --primary-weak:  #e7f0ff;
  --primary-text:  #0c2e78;

  --chip-bg:       #101827;
  --chip-text:     #fff;

  /* KPI прогресс */
  --kpi-green:     #2e7d4f;
  --kpi-yellow:    #b98c1d;
  --kpi-red:       #8a2b34;
  --kpi-green-soft:#e6f3ea;
  --kpi-yellow-soft:#f8f1da;
  --kpi-red-soft:  #f4e4e6;

  /* элементы UI */
  --menu-bg:       var(--surface);
  --menu-border:   var(--border);
}

/* Тёмная тема: просто переопределяем переменные */
.theme-dark{
  --bg:            #0f1420;
  --bg-weak:       #0b101a;
  --surface:       #111725;
  --surface-2:     #0f1624;
  --text:          #e8edf6;
  --text-weak:     #b8c0d4;
  --text-mute:     #8d96aa;
  --border:        #232c3d;
  --shadow:        0 10px 30px rgba(0,0,0,.35);

  --primary:       #77a5ff;
  --primary-weak:  #162038;
  --primary-text:  #cfe0ff;

  --chip-bg:       #0e1726;
  --chip-text:     #eaf0ff;

  --kpi-green:     #4fd08a;
  --kpi-yellow:    #f0c85a;
  --kpi-red:       #e8777e;
  --kpi-green-soft:#0f231a;
  --kpi-yellow-soft:#231f11;
  --kpi-red-soft:  #221114;

  --menu-bg:       #0f1624;
  --menu-border:   #273148;
}

/* ---------- База ---------- */
*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font: 14px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* Ссылки/выделения */
a{ color:var(--primary); text-decoration:none; }
a:hover{ text-decoration:underline; }
::selection{ background:var(--primary-weak); color:var(--primary-text); }

/* ---------- Шапка ---------- */
header{
  display:flex; align-items:center; gap:12px;
  padding:14px 18px;
  position:sticky; top:0; z-index:10;
  background:var(--surface); border-bottom:1px solid var(--border);
}
header h1{
  margin:0; font-size:20px; letter-spacing:.2px;
}

/* Кнопка меню ≡ (если есть) и переключатель темы */
.header-actions{ margin-left:auto; display:flex; align-items:center; gap:10px; }
.btn, .chip{
  display:inline-flex; align-items:center; gap:8px;
  padding:8px 12px; border-radius:999px; border:1px solid var(--border);
  background:var(--surface); color:var(--text); box-shadow:var(--shadow);
  cursor:pointer; transition:.15s ease-in-out;
}
.btn:hover{ transform:translateY(-1px); }
.btn-primary{
  background:var(--primary); color:#fff; border-color:transparent;
}
#themeToggle{
  padding:8px 12px; border-radius:10px;
  background:var(--bg-weak); border:1px solid var(--border); color:var(--text);
}
#themeToggle:hover{ background:var(--surface-2); }

/* ---------- Лейаут ---------- */
main{ display:grid; grid-template-columns: 300px 1fr; gap:18px; padding:18px; }
aside{
  background:var(--surface); border:1px solid var(--border);
  border-radius:16px; padding:14px; box-shadow:var(--shadow);
}
.section{
  background:var(--surface); border:1px solid var(--border);
  border-radius:16px; padding:14px; box-shadow:var(--shadow);
}

/* ---------- Чипы департаментов ---------- */
.dept-chips{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; }
.dept-chips .chip{
  background:var(--chip-bg); color:var(--chip-text); border-color:transparent;
  padding:8px 14px; box-shadow:none;
}
.dept-chips .chip.is-active{ outline:2px solid var(--primary); }

/* ---------- Сайдбар: пользователи ---------- */
.user-list{ display:flex; flex-direction:column; gap:10px; }
.user-item{
  background:var(--surface-2); border:1px solid var(--border);
  border-radius:14px; padding:10px 12px; cursor:pointer; transition:.15s;
}
.user-item:hover{ border-color:var(--primary); }
.user-item.is-active{ outline:2px solid var(--primary); }

/* мини-прогресс в сайдбаре */
.user-mini{
  height:10px; border-radius:8px; background:var(--bg-weak); margin-top:8px; overflow:hidden;
}
.user-mini > span{
  display:block; height:100%;
  background:linear-gradient(90deg,var(--primary),#45b3ff);
}

/* ---------- Таблица KPI ---------- */
.kpi-table{ width:100%; border-collapse:separate; border-spacing:0 10px; }
.kpi-row{
  background:var(--surface); border:1px solid var(--border);
  border-radius:14px; padding:12px; box-shadow:var(--shadow);
}
.kpi-name{ font-weight:600; }
.kpi-target{ color:var(--text-mute); }

/* Дни недели колонками — просто утилити, твой JS подставит структуру */
.grid-days{ display:grid; grid-template-columns: repeat(7, minmax(90px,1fr)); gap:12px; }
.day-cell{
  background:var(--surface-2); border:1px solid var(--border); border-radius:10px;
  padding:10px; min-height:60px; display:flex; align-items:center; justify-content:center;
}

/* ---------- Прогресс-бар KPI (универсальный) ----------
   Разметка ожидается такая:
   <div class="kpi-bar is-green"><span style="width: 75%"><b>75%</b></span></div>
--------------------------------------------------------- */
.kpi-bar{
  height:24px; background:var(--bg-weak); border:1px solid var(--border);
  border-radius:999px; overflow:hidden; position:relative;
}
.kpi-bar > span{
  display:block; height:100%; position:relative;
  border-radius:999px;
}
.kpi-bar > span b{
  position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
  font-weight:700; font-size:12px; letter-spacing:.2px;
  color:var(--text); /* на светлых оттенках читаемо */
}
/* цвета состояний */
.kpi-bar.is-green > span{ background:var(--kpi-green-soft); border-right:2px solid var(--kpi-green); }
.kpi-bar.is-yellow > span{ background:var(--kpi-yellow-soft); border-right:2px solid var(--kpi-yellow); }
.kpi-bar.is-red > span{ background:var(--kpi-red-soft); border-right:2px solid var(--kpi-red); }
/* в тёмной теме делаем текст на самой заливке белым */
.theme-dark .kpi-bar > span b{ color:#fff; }

/* ---------- Контекст-меню/модалки (общие стили) ---------- */
.menu{
  background:var(--menu-bg); color:var(--text);
  border:1px solid var(--menu-border); border-radius:12px; box-shadow:var(--shadow);
}
.modal{
  background:var(--surface); color:var(--text);
  border:1px solid var(--border); border-radius:14px; box-shadow:var(--shadow);
}
input, select, textarea{
  background:var(--surface-2); color:var(--text);
  border:1px solid var(--border); border-radius:8px; padding:8px 10px;
}

/* ---------- Навигация по месяцам/неделям ---------- */
.pager{ display:flex; align-items:center; gap:10px; }
.pager .arrow{
  width:28px; height:28px; display:grid; place-items:center;
  border-radius:8px; border:1px solid var(--border); background:var(--surface);
}
.pager .arrow:hover{ border-color:var(--primary); }

/* Мелкие утилиты */
.muted{ color:var(--text-weak); }
.card{ background:var(--surface); border:1px solid var(--border); border-radius:14px; box-shadow:var(--shadow); padding:12px; }
